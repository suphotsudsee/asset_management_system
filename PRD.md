# เอกสารข้อกำหนดผลิตภัณฑ์ (PRD)

## 1. ภาพรวมโครงการ
ระบบจัดการครุภัณฑ์ (Asset Management System) เป็นเว็บแอปพลิเคชันสำหรับองค์กรเพื่อจัดเก็บ ติดตาม และบริหารจัดการครุภัณฑ์อย่างครบวงจร พัฒนาด้วย CodeIgniter 3, Bootstrap 4 และ jQuery โดยมีการเชื่อมต่อฐานข้อมูล MySQL/MariaDB เพื่อเก็บข้อมูลครุภัณฑ์ ประวัติการใช้งาน และสถิติต่าง ๆ ของระบบ

## 2. เป้าหมายหลักของระบบ
- จัดเก็บข้อมูลครุภัณฑ์อย่างเป็นระเบียบ สามารถค้นหาและติดตามได้ง่าย
- ลดการสูญหายของครุภัณฑ์และเพิ่มความโปร่งใสในการโอนย้าย/จำหน่าย
- สนับสนุนการวางแผนซ่อมบำรุงและคำนวณค่าเสื่อมราคา
- สร้างรายงานเพื่อประกอบการตัดสินใจเชิงบริหาร

## 3. บทบาทผู้ใช้งาน (User Roles)
- **ผู้ดูแลระบบ (Admin)**: จัดการข้อมูลครุภัณฑ์ทั้งหมด จัดการผู้ใช้ และเข้าถึงทุกหน้าที่งาน
- **เจ้าหน้าที่พัสดุ (Asset Officer)**: เพิ่ม/แก้ไขข้อมูลครุภัณฑ์ บันทึกการโอนย้าย ซ่อมแซม จำหน่าย และสำรวจครุภัณฑ์
- **ผู้บริหาร (Manager)**: เข้าดูรายงาน สถิติ และอนุมัติการดำเนินงานบางประเภท
- **ผู้ใช้งานทั่วไป (Viewer)**: เข้าดูข้อมูลครุภัณฑ์และรายงานที่ได้รับอนุญาต

## 4. ขอบเขตฟังก์ชันหลัก (Functional Requirements)
### 4.1 หน้าหลักและแดชบอร์ด
- แสดงสถิติภาพรวมของครุภัณฑ์ เช่น จำนวนทั้งหมด การซ่อมแซมที่รอดำเนินการ และประวัติการโอนย้ายล่าสุด
- แสดงกราฟข้อมูลด้วย Chart.js และตารางด้วย DataTables

### 4.2 การลงทะเบียนและจัดการครุภัณฑ์
- เพิ่ม แก้ไข ลบข้อมูลครุภัณฑ์ พร้อมการตรวจสอบหมายเลขซีเรียลซ้ำ
- บันทึกข้อมูลการจัดซื้อ สถานที่ตั้ง สถานะ และผู้รับผิดชอบ
- รองรับการค้นหาและกรองตามประเภท สถานะ หรือสถานที่
- คำนวณค่าเสื่อมราคาจากอัตราที่กำหนดและแสดงในรายละเอียดครุภัณฑ์

### 4.3 การจัดการประเภทครุภัณฑ์
- สร้าง แก้ไข ลบประเภทครุภัณฑ์ พร้อมการตรวจสอบชื่อซ้ำ
- ใช้ประเภทในการจัดหมวดหมู่และคำนวณค่าเสื่อมราคาตามประเภท

### 4.4 การโอนย้ายครุภัณฑ์
- บันทึกการโอนย้ายระหว่างสถานที่ พร้อมระบุเหตุผลและผู้ดำเนินการ
- ตรวจสอบสถานที่เดิมและสถานที่ใหม่ไม่ให้ซ้ำกัน
- อัปเดตสถานที่ปัจจุบันของครุภัณฑ์และเก็บประวัติ

### 4.5 การซ่อมแซมครุภัณฑ์
- ส่งคำขอซ่อมแซมพร้อมระดับความสำคัญ ประเภทการซ่อม และค่าใช้จ่ายประมาณการ
- ป้องกันการส่งซ้ำหากมีรายการซ่อมที่ยังไม่เสร็จสิ้น
- ติดตามสถานะการซ่อม (รอพิจารณา อนุมัติ ดำเนินการ เสร็จสิ้น) และปรับสถานะครุภัณฑ์ให้สอดคล้อง

### 4.6 การแทงจำหน่ายครุภัณฑ์
- บันทึกข้อมูลการจำหน่าย เช่น วิธีการจำหน่าย วันที่ ผู้ดำเนินการ และมูลค่าตามบัญชี
- ตรวจสอบไม่ให้จำหน่ายซ้ำหรือจำหน่ายครุภัณฑ์ที่ถูกจำหน่ายแล้ว
- อัปเดตสถานะเป็น “จำหน่ายแล้ว” และเก็บประวัติสำหรับการตรวจสอบ

### 4.7 รายงานสำรวจครุภัณฑ์ประจำปี
- จัดเก็บผลการสำรวจประจำปีพร้อมสภาพครุภัณฑ์และผู้สำรวจ
- ตรวจสอบไม่ให้บันทึกครุภัณฑ์เดียวกันซ้ำในปีเดียวกัน
- อัปเดตสถานะครุภัณฑ์ตามผลการสำรวจ (ดี พอใช้ ชำรุด ฯลฯ)

### 4.8 รายงานค่าเสื่อมราคา
- เก็บบันทึกค่าเสื่อมราคา รายวัน/เดือน/ปี และค่าเสื่อมสะสม
- แสดงรายงานตามช่วงเวลาหรือกลุ่มทรัพย์สิน พร้อมสรุปยอดรวม

### 4.9 การจัดการข้อมูลค้ำประกันสัญญา
- เก็บข้อมูลค้ำประกันสัญญา ต่ออายุ และเคลมประกัน
- แจ้งเตือนเมื่อค้ำประกันใกล้หมดอายุและแสดงในแดชบอร์ด

### 4.10 ระบบรายงานและสถิติ
- รายงานสถานะครุภัณฑ์ รายงานการโอนย้าย ซ่อมแซม จำหน่าย และค้ำประกัน
- สนับสนุนการส่งออกข้อมูลเป็น CSV และการพิมพ์เอกสารทางการ
- แสดงกราฟและสถิติเปรียบเทียบตามปี เดือน หรือสถานที่

### 4.11 การจัดการผู้ใช้และสิทธิ์
- เพิ่ม แก้ไข ลบผู้ใช้ พร้อมกำหนดบทบาท (Admin, Officer, Manager, Viewer)
- เข้ารหัสรหัสผ่านและตรวจสอบความซ้ำของชื่อผู้ใช้
- จำกัดการเข้าถึงหน้าและฟังก์ชันตามสิทธิ์

### 4.12 API สำหรับบูรณาการ
- RESTful API สำหรับดึงข้อมูลครุภัณฑ์ ประวัติการโอนย้าย ซ่อมแซม สำรวจ และสถิติต่าง ๆ
- Endpoint สำหรับอัปเดตสถานะครุภัณฑ์และดึงข้อมูลแจ้งเตือนค้ำประกัน
- รองรับการค้นหาครุภัณฑ์ผ่าน API เพื่อเชื่อมต่อระบบภายนอก

## 5. ข้อกำหนดที่ไม่ใช่ฟังก์ชัน (Non‑Functional Requirements)
- **ประสิทธิภาพ**: รองรับข้อมูลครุภัณฑ์ระดับหลายหมื่นรายการได้อย่างรวดเร็ว ใช้การแบ่งหน้าและการค้นหาแบบ Ajax
- **ความปลอดภัย**: ใช้การตรวจสอบสิทธิ์ผ่าน session, เข้ารหัสรหัสผ่านด้วย `password_hash`, ป้องกัน SQL Injection ด้วย Active Record และปรับเปลี่ยน `encryption_key`
- **ความน่าเชื่อถือ**: มีไฟล์ `test_system.php` สำหรับตรวจสอบการติดตั้งและความพร้อมของระบบ
- **การใช้งาน**: หน้าตา UI ใช้ Bootstrap 4 รองรับอุปกรณ์หลากหลาย ข้อความและปุ่มเป็นภาษาไทยชัดเจน
- **การบำรุงรักษา**: โครงสร้าง CodeIgniter แยก controller/model/view ชัดเจน ง่ายต่อการขยายฟีเจอร์

## 6. ตัวชี้วัดความสำเร็จ (Success Metrics)
- อัตราการบันทึกครุภัณฑ์ครบถ้วนมากกว่า 95%
- ลดเวลาในการค้นหาข้อมูลครุภัณฑ์จากชั่วโมงเป็นนาที
- ลดการสูญหายของครุภัณฑ์ต่อปีลงอย่างน้อย 50%
- มีรายงานค่าเสื่อมและสำรวจประจำปีภายในระยะเวลาที่กำหนด

## 7. สมมติฐานและข้อจำกัด
- องค์กรมีเซิร์ฟเวอร์ PHP/MySQL ที่รองรับ CodeIgniter และการตั้งค่า mod_rewrite
- ผู้ใช้ได้รับการอบรมการใช้งานพื้นฐานและมีสิทธิ์เข้าถึงตามบทบาท
- ฐานข้อมูลสำรองอย่างสม่ำเสมอเพื่อป้องกันข้อมูลสูญหาย

## 8. ขอบเขตที่อยู่นอกโครงการ (Out of Scope)
- การเชื่อมต่อกับระบบบัญชีหรือ ERP ภายนอก (ยกเว้นผ่าน API)
- การจัดการสต็อกวัสดุสิ้นเปลือง
- ระบบลงนามอิเล็กทรอนิกส์หรือเวิร์กโฟลว์การอนุมัติหลายขั้นตอน

---
เอกสารนี้สรุปขอบเขตและหน้าที่การทำงานของระบบจัดการครุภัณฑ์ เพื่อใช้เป็นแนวทางในการพัฒนา ทดสอบ และส่งมอบงานให้ตรงตามความต้องการของผู้ใช้งานและผู้มีส่วนเกี่ยวข้อง
